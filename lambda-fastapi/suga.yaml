targets:
  - demo/aws-fargate-demo@17
name: lambda-fastapi-demo
description: AWS Lambda demo with FastAPI for serverless API and Auth services
services:
  api:
    subtype: lambda
    container:
      docker:
        dockerfile: Dockerfile
        context: .
    dev:
      script: uv run uvicorn main:app --host 0.0.0.0 --port $PORT
buckets:
  static_assets:
    content_path: /frontend
entrypoints:
  ingress:
    routes:
      /:
        name: api
      /website/:
        name: static_assets
databases:
  db:
    access:
      api:
        - query
    env_var_key: DATABASE_URL
